{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/tuu18/Documents/csc309/team63/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"C:/Users/tuu18/Documents/csc309/team63/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/tuu18/Documents/csc309/team63/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/tuu18/Documents/csc309/team63/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/tuu18/Documents/csc309/team63/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./styles.css';import SearchBar from'./SearchBar';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostTable=/*#__PURE__*/function(_React$Component){_inherits(PostTable,_React$Component);var _super=_createSuper(PostTable);function PostTable(){var _this;_classCallCheck(this,PostTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={selected:[],query:\"\"};_this.queryCallBack=function(childData){_this.setState({query:childData});};_this.removePost=function(post){var filteredPosts=_this.props.posts.filter(function(p){return p!==post;});_this.props.setPosts(filteredPosts);_this.props.setLog(\"removed post '\"+post.name+\"'\");};_this.handleChange=function(post){var selectedList=_this.state.selected;var find=selectedList.indexOf(post);if(find>-1){selectedList.splice(find,1);}else{selectedList.push(post);}_this.setState({selected:selectedList});};_this.deleteSelected=function(){var selected=_this.state.selected;var postList=_this.props.posts;var _iterator=_createForOfIteratorHelper(selected),_step;try{var _loop=function _loop(){var post=_step.value;var filteredList=postList.filter(function(p){return p!==post;});postList=filteredList;_this.props.setLog(\"removed post '\"+post.name+\"'\");};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.setState({selected:[]});_this.props.setPosts(postList);};_this.filterPosts=function(posts,query){if(query===\"\"){return _this.tableData(_this.props.posts);}var lowerQuery=query.toLowerCase();var filteredList=posts.filter(function(post){var name=post.name.toLowerCase();return name.includes(lowerQuery);});return _this.tableData(filteredList);};_this.tableData=function(searchResult){return searchResult.map(function(post){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onChange:function onChange(){return _this.handleChange(post);}})}),/*#__PURE__*/_jsx(\"td\",{id:\"inputText\",children:post.postID}),/*#__PURE__*/_jsx(\"td\",{id:\"inputText\",children:post.name}),/*#__PURE__*/_jsx(\"td\",{id:\"inputText\",children:post.genre}),/*#__PURE__*/_jsx(\"td\",{id:\"inputText\",children:post.user}),/*#__PURE__*/_jsx(\"td\",{id:\"inputText\",children:post.date}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/CoverPageSettings\",children:/*#__PURE__*/_jsx(\"button\",{type:\"edit\",children:\"Edit\"})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/ExternalCoverPage\",children:/*#__PURE__*/_jsx(\"button\",{type:\"view\",children:\"View\"})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"select\",onClick:function onClick(){return _this.removePost(post);},children:\"Delete\"})})]},post.postID);});};return _this;}_createClass(PostTable,[{key:\"tableHeader\",value:function tableHeader(){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{id:\"inputText\",children:\" Select \"}),/*#__PURE__*/_jsx(\"th\",{id:\"inputText\",children:\" Post ID \"}),/*#__PURE__*/_jsx(\"th\",{id:\"inputText\",children:\" Title \"}),/*#__PURE__*/_jsx(\"th\",{id:\"inputText\",children:\" Genre \"}),/*#__PURE__*/_jsx(\"th\",{id:\"inputText\",children:\" User \"}),/*#__PURE__*/_jsx(\"th\",{id:\"inputText\",children:\" Date Posted \"}),/*#__PURE__*/_jsx(\"th\",{id:\"inputText\",children:\" Edit \"}),/*#__PURE__*/_jsx(\"th\",{id:\"inputText\",children:\" View \"}),/*#__PURE__*/_jsx(\"th\",{id:\"inputText\",children:\" Delete \"})]});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"table-container\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"box-title\",children:\"Post Management\"}),/*#__PURE__*/_jsx(SearchBar,{parentCallBack:this.queryCallBack}),/*#__PURE__*/_jsx(\"table\",{className:\"table\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[this.tableHeader(),this.filterPosts(this.props.posts,this.state.query)]})}),/*#__PURE__*/_jsx(\"div\",{className:\"footer\",children:/*#__PURE__*/_jsx(\"button\",{id:\"right-button\",type:\"deleteAll\",onClick:this.deleteSelected,children:\"Delete Selected\"})})]});}}]);return PostTable;}(React.Component);export default PostTable;","map":{"version":3,"sources":["C:/Users/tuu18/Documents/csc309/team63/client/src/components/AdminComponents/PostTable.js"],"names":["React","SearchBar","Link","PostTable","state","selected","query","queryCallBack","childData","setState","removePost","post","filteredPosts","props","posts","filter","p","setPosts","setLog","name","handleChange","selectedList","find","indexOf","splice","push","deleteSelected","postList","filteredList","filterPosts","tableData","lowerQuery","toLowerCase","includes","searchResult","map","postID","genre","user","date","tableHeader","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './styles.css';\r\nimport SearchBar from './SearchBar';\r\nimport {Link} from 'react-router-dom';\r\n\r\nclass PostTable extends React.Component {\r\n    state = {\r\n        selected: [],\r\n        query: \"\"\r\n    }\r\n\r\n    queryCallBack = (childData) => {\r\n        this.setState({\r\n            query: childData\r\n        })\r\n    }\r\n\r\n    tableHeader() {\r\n        return(\r\n            <tr>\r\n                <th id='inputText'> Select </th>\r\n\t \t\t\t<th id='inputText'> Post ID </th>\r\n                <th id='inputText'> Title </th>\r\n\t \t\t\t<th id='inputText'> Genre </th>\r\n\t \t\t\t<th id='inputText'> User </th>\r\n                <th id='inputText'> Date Posted </th>\r\n                <th id='inputText'> Edit </th>\r\n                <th id='inputText'> View </th>\r\n                <th id='inputText'> Delete </th>\r\n            </tr>\r\n        )\r\n    }\r\n\r\n    removePost = (post) => {\r\n        const filteredPosts = this.props.posts.filter((p) => { return p !== post })\r\n        this.props.setPosts(filteredPosts)\r\n        this.props.setLog(\"removed post '\" + post.name + \"'\")\r\n    }\r\n\r\n    handleChange = (post) => {\r\n        const selectedList = this.state.selected\r\n        const find = selectedList.indexOf(post)\r\n      \r\n        if (find > -1) {\r\n          selectedList.splice(find, 1)\r\n        } else {\r\n          selectedList.push(post)\r\n        }\r\n      \r\n        this.setState({\r\n            selected: selectedList\r\n        })\r\n    }\r\n\r\n    deleteSelected = () => {\r\n        const selected = this.state.selected\r\n        let postList = this.props.posts\r\n        for (let post of selected ) {\r\n            let filteredList = postList.filter((p) => { return p !== post })\r\n            postList = filteredList\r\n            this.props.setLog(\"removed post '\" + post.name + \"'\")\r\n        }\r\n        this.setState({\r\n            selected: []\r\n        })\r\n        this.props.setPosts(postList)\r\n    }\r\n\r\n    filterPosts = (posts, query) => {\r\n        if (query === \"\") {\r\n            return this.tableData(this.props.posts)\r\n        }\r\n        const lowerQuery = query.toLowerCase()\r\n\r\n        const filteredList =  posts.filter((post) => {\r\n            const name = post.name.toLowerCase()\r\n            return name.includes(lowerQuery)\r\n        })\r\n\r\n        return this.tableData(filteredList)\r\n    };\r\n\r\n\r\n    tableData = (searchResult) => {\r\n        return searchResult.map((post) => {\r\n            return (\r\n                <tr key= {post.postID}>\r\n                    <td><input type=\"checkbox\" onChange={ () => this.handleChange(post) }/></td>\r\n                    <td id='inputText'>{post.postID}</td>\r\n                    <td id='inputText'>{post.name}</td>\r\n                    <td id='inputText'>{post.genre}</td>\r\n                    <td id='inputText'>{post.user}</td>\r\n                    <td id='inputText'>{post.date}</td>\r\n                    <td><Link to='/CoverPageSettings'><button type=\"edit\">Edit</button></Link></td>\r\n                    <td><Link to='/ExternalCoverPage'><button type=\"view\">View</button></Link></td>\r\n                    <td><button type=\"select\" onClick={ () => this.removePost(post) }>Delete</button></td>\r\n                </tr>\r\n            )\r\n        })\r\n    }\r\n\r\n   render() { \r\n      return (\r\n        <div className=\"table-container\">\r\n            <h3 className=\"box-title\">Post Management</h3>\r\n                <SearchBar parentCallBack={ this.queryCallBack }/>\r\n                <table className='table'>\r\n                <tbody>\r\n                        { this.tableHeader() }\r\n                        { this.filterPosts(this.props.posts, this.state.query) }\r\n                </tbody>\r\n                </table>\r\n                <div className='footer'>\r\n                    <button id='right-button' type=\"deleteAll\" onClick={ this.deleteSelected }>Delete Selected</button>\r\n                </div>\r\n        </div>\r\n      )\r\n   }\r\n}\r\n\r\nexport default PostTable"]},"metadata":{},"sourceType":"module"}