{"ast":null,"code":"import _slicedToArray from\"C:/Users/tuu18/Documents/csc309/team63/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import ExploreView from'../../components/ExploreView';import\"./styles.css\";import CategoryWork from'../../components/CategoryWorks';import SelectReference from'../../components/SelectReference';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ExplorePage(props){//a get request will be made to the server to retrieve trending and newly uploaded works\n//this data will be stored in a state variable and passed to the corresponding\n//ExploreView components below\nvar categoryWorks=[{name:'R&B',works:[props.works[1],props.works[2]]},{name:'Pop',works:[props.works[3],props.works[0],props.works[2],props.works[5]]},{name:'Jazz',works:[]},{name:'Hiphop',works:[props.works[1],props.works[2]]},{name:'Instrumentals',works:[props.works[4]]},{name:'Acapella',works:[]}];var reverse_work=props.works;//a get request will be made to the server to get all work names and ids in the database\nvar allWorks=props.works.map(function(work,idx){return{name:work.title+\" - \"+work.artist,id:work.id,idx:idx};});var _useState=useState(0),_useState2=_slicedToArray(_useState,2),categoryIdx=_useState2[0],setCategoryIdx=_useState2[1];var _useState3=useState(categoryWorks[0].works),_useState4=_slicedToArray(_useState3,2),displayedWorks=_useState4[0],setDisplayedWorks=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),searchedWorks=_useState6[0],setSearchedWorks=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),searchMode=_useState8[0],setSearchMode=_useState8[1];var handleClick=function handleClick(idx){//a get request will be made to the server to retrieve the works under the specified category\nsetCategoryIdx(idx);};var handleSearch=function handleSearch(){//a get request will be made to the server to get the work details\n//such as cover image title and artist for the selected ids\nvar workIds=searchedWorks.map(function(work){return work.id;});var results=props.works.filter(function(work){return workIds.includes(work.id);});console.log(results);setDisplayedWorks(results);setSearchMode(true);};return/*#__PURE__*/_jsxs(\"div\",{className:\"page explore-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[searchMode&&/*#__PURE__*/_jsx(\"button\",{className:\"box-btn\",onClick:function onClick(){setSearchMode(false);setSearchedWorks([]);},children:\"Back\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-box\",children:[/*#__PURE__*/_jsx(SelectReference,{options:allWorks,selectedOptions:searchedWorks,selectLimit:-1,handleSelect:function handleSelect(selectedWork){setSearchedWorks(selectedWork);},placeholder:\"Select works to search for\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:handleSearch,children:\"Search\"})]})]}),!searchMode&&/*#__PURE__*/_jsxs(\"div\",{className:\"bottom-page\",children:[/*#__PURE__*/_jsx(ExploreView,{works:reverse_work.reverse(),title:\"Trending\"}),/*#__PURE__*/_jsx(ExploreView,{works:props.works.slice(2,4),title:\"Recently Uploaded\"}),/*#__PURE__*/_jsx(CategoryWork,{handleClick:handleClick}),/*#__PURE__*/_jsx(ExploreView,{works:categoryWorks[categoryIdx].works,title:categoryWorks[categoryIdx].name})]}),searchMode&&/*#__PURE__*/_jsx(\"div\",{className:\"search-page\",children:/*#__PURE__*/_jsx(ExploreView,{works:displayedWorks,title:displayedWorks.length?\"Search Results\":\"No Search Results\"})})]});}export default ExplorePage;","map":{"version":3,"sources":["C:/Users/tuu18/Documents/csc309/team63/client/src/pages/ExplorePage/ExplorePage.js"],"names":["React","useState","ExploreView","CategoryWork","SelectReference","ExplorePage","props","categoryWorks","name","works","reverse_work","allWorks","map","work","idx","title","artist","id","categoryIdx","setCategoryIdx","displayedWorks","setDisplayedWorks","searchedWorks","setSearchedWorks","searchMode","setSearchMode","handleClick","handleSearch","workIds","results","filter","includes","console","log","selectedWork","reverse","slice","length"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport ExploreView from '../../components/ExploreView';\nimport PropTypes from 'prop-types';\nimport \"./styles.css\";\nimport CategoryWork from '../../components/CategoryWorks';\nimport SelectReference from '../../components/SelectReference';\n\nfunction ExplorePage (props) {\n\n    //a get request will be made to the server to retrieve trending and newly uploaded works\n    //this data will be stored in a state variable and passed to the corresponding\n    //ExploreView components below\n\n    const categoryWorks = [\n        {\n            name:'R&B',\n            works: [props.works[1], props.works[2]] \n        },\n        {\n            name:'Pop',\n            works: [props.works[3], props.works[0], props.works[2], props.works[5]] \n        },\n        {\n            name:'Jazz',\n            works: []\n        },\n        {\n            name:'Hiphop',\n            works: [props.works[1], props.works[2]] \n        },\n        {\n            name:'Instrumentals',\n            works: [props.works[4]] \n        },\n        {\n            name:'Acapella',\n            works: []\n        }\n    ];\n\n    let reverse_work = props.works;\n    \n    //a get request will be made to the server to get all work names and ids in the database\n    const allWorks = props.works.map((work,idx) => {\n        return {name: work.title + \" - \" + work.artist, id: work.id, idx: idx}});\n\n    const [categoryIdx, setCategoryIdx] = useState(0);\n    const [displayedWorks, setDisplayedWorks] = useState(categoryWorks[0].works)\n    const [searchedWorks, setSearchedWorks] = useState([]);\n    const [searchMode, setSearchMode] = useState(false);\n\n    const handleClick = (idx) => {\n        //a get request will be made to the server to retrieve the works under the specified category\n        setCategoryIdx(idx);\n    }\n\n    const handleSearch = () => {\n        //a get request will be made to the server to get the work details\n        //such as cover image title and artist for the selected ids\n        const workIds = searchedWorks.map(work => work.id);\n        const results = props.works.filter(work => workIds.includes(work.id));\n        console.log(results)\n        setDisplayedWorks(results);\n        setSearchMode(true);\n    }\n\n    return (\n        <div className=\"page explore-page\">\n            <div className=\"header\">\n                {searchMode && <button className=\"box-btn\" onClick={() => {setSearchMode(false); setSearchedWorks([])}}>Back</button>}\n                <div className=\"search-box\">\n                    <SelectReference options={allWorks} selectedOptions={searchedWorks} selectLimit={-1}\n                        handleSelect={selectedWork => {setSearchedWorks(selectedWork)}} placeholder=\"Select works to search for\"/>\n                \n                    <button className=\"btn\" onClick={handleSearch}>\n                        Search\n                    </button>\n                </div>\n                \n            </div>   \n            {!searchMode && \n            (   <div className=\"bottom-page\">\n                    <ExploreView works={reverse_work.reverse()} title={\"Trending\"}/>\n                    <ExploreView works={props.works.slice(2,4)} title={\"Recently Uploaded\"}/>\n                    <CategoryWork handleClick={handleClick}/>\n                    <ExploreView works={categoryWorks[categoryIdx].works} title={categoryWorks[categoryIdx].name}/>\n                </div>\n            )}\n\n            {searchMode &&\n            (\n                <div className=\"search-page\">\n                    <ExploreView works={displayedWorks} title={displayedWorks.length ? \"Search Results\" : \"No Search Results\"}/>\n                </div>\n            )}\n        </div>\n        \n    );\n}\n\nExplorePage.propTypes = {\n    works: PropTypes.array\n}\n\nexport default ExplorePage;\n"]},"metadata":{},"sourceType":"module"}